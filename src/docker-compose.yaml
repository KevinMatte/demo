# See https://docs.docker.com/reference/compose-file/

services:
  demo:
    image: ${DEMO_IMAGE}:${DEMO_VERSION}
    container_name: demo
    build:
      dockerfile_inline: |
        FROM ubuntu/apache2:edge
        RUN apt update
        RUN apt install -y php libapache2-mod-php
        RUN apt install libapache2-mod-wsgi-py3 python3 -y
        RUN apt install python3-markdown -y

        COPY build/ /

        RUN chown -R www-data:www-data /var/www

    ports:
      - name: web
        target: 80
        published: "8080"
        protocol: tcp
        app_protocol: http
        mode: host

# #if mounted
#    volumes:
#      - ${WWW_PATH}:/var/www
# #endif

    networks:
      - frontend
      - backend

#  db:
#    image: mariadb
#    networks:
#      - backend

networks:
  frontend:
  backend:
